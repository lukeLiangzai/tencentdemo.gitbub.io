<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="applicable-device" content="mobile">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>腾讯笔试题</title>
    <link rel="stylesheet" href="./index.css">
</head>
<body>
    <section class="question">
        <div class="question-head ">
            <div class="question-title">
                <span class="text">移动端排序</span>
            </div>
        </div>
        <div class="question-body sort sorted"><!--sorting-->
            <div class="sort-row"><!--moving-->
                <div class="cell sort-row-cont">
                    <div class="cell-hd">
                        <span class="sort-seq">1</span>
                    </div>
                    <div class="cell-m">选项B</div>
                    <div class="cell-ft sort-handle">
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                    </div>
                </div>
            </div>
            <div class="sort-row">
                <div class="cell sort-row-cont">
                    <div class="cell-hd">
                        <span class="sort-seq">2</span>
                    </div>
                    <div class="cell-m">选项A</div>
                    <div class="cell-ft sort-handle">
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                    </div>
                </div>
            </div>
            <div class="sort-row">
                <div class="cell sort-row-cont">
                    <div class="cell-hd">
                        <span class="sort-seq">3</span>
                    </div>
                    <div class="cell-m">选项C</div>
                    <div class="cell-ft sort-handle">
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                    </div>
                </div>
            </div>
            <div class="sort-row">
                <div class="cell sort-row-cont">
                    <div class="cell-hd">
                        <span class="sort-seq">4</span>
                    </div>
                    <div class="cell-m">选项D</div>
                    <div class="cell-ft sort-handle">
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                        <i class="sort-handle-line"></i>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>
<script>
    var questionBody=document.getElementsByClassName('question-body')[0];
    var sortRow=document.getElementsByClassName('sort-row');
    var startY=0;
    var startPositionY=0;
    
    for(var item of sortRow){
        item.addEventListener('touchstart', touchSatrtFunc,false)

        item.addEventListener('touchmove', touchMoveFunc,false)

        item.addEventListener('touchend', touchEndFunc,false)
    }

    //去除某一个classname
    function removeClassName(name,str){
        return name=name.replace(' '+str,'')
    }
    //手指按下
    function touchSatrtFunc(e){
        questionBody.className+=' sorting'
        this.className+=' moving'

        var e = e || window.event;
        // e.preventDefault(); //阻止触摸时浏览器的缩放、滚动条滚动等
        //获取第一个触点
        var touch = e.touches[0]; 
        //页面触点Y坐标
        var y = Number(touch.pageY); 
        //可拖动元素距离页面顶部的距离
        startPositionY = this.offsetTop;
        //记录触点初始位置
        startY = y - startPositionY;

        console.log(this.offsetTop)

        //获取当前dom节点索引
    }
    //手指移动
    function touchMoveFunc(e){
        var e = e || window.event;
        // e.preventDefault(); //阻止触摸时浏览器的缩放、滚动条滚动等
        var now = Number(e.touches[0].pageY); 
        
        // console.log('move'+(now-startY))
        // console.log(this)



        let top = now - startY;

        //纵向最大可移动距离
        // let moveMaxH = document.body.clientHeight - imgObj.offsetHeight;

        // top = top < 0 ? 0 : top;
        // top = top > moveMaxH ? moveMaxH : top;

        console.log(top)
        this.style.transform=`translate(0px, ${top}px)`
        // imgObj.style.left = left + 'px';
        // imgObj.style.top = top + 'px';
        

    }
    //手指松开
    function touchEndFunc(e){
        questionBody.className=removeClassName(questionBody.className,'sorting')
        this.className=removeClassName(this.className,'moving')
        startY=0
        startPositionY = this.offsetTop
    }

    
</script>
</html>